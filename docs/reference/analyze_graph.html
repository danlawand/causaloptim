<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Analyze the causal graph to determine constraints and objective — analyze_graph • causaloptim</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Analyze the causal graph to determine constraints and objective — analyze_graph" />
<meta property="og:description" content="The graph must contain certain edge and vertex attributes which are documented
in the Details below. The shiny app run by specify_graph will return a
graph in this format." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">causaloptim</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/CausalBoundsMethods.pdf">A General Method for Deriving Tight Symbolic Bounds on Causal Effects (PDF)</a>
    </li>
    <li>
      <a href="../articles/example-code.html">Code from examples in manuscript</a>
    </li>
    <li>
      <a href="../articles/shinyapp.html">How to use the causaloptim Shiny app to analyze graphs</a>
    </li>
    <li>
      <a href="../articles/vertexenum-speed.html">Improving the speed of computing causal bounds</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sachsmc/causaloptim/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Analyze the causal graph to determine constraints and objective</h1>
    <small class="dont-index">Source: <a href='https://github.com/sachsmc/causaloptim/blob/master/R/response-functional.R'><code>R/response-functional.R</code></a></small>
    <div class="hidden name"><code>analyze_graph.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The graph must contain certain edge and vertex attributes which are documented
in the Details below. The shiny app run by <a href='specify_graph.html'>specify_graph</a> will return a
graph in this format.</p>
    </div>

    <pre class="usage"><span class='fu'>analyze_graph</span><span class='op'>(</span><span class='va'>graph</span>, <span class='va'>constraints</span>, <span class='va'>effectt</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>graph</th>
      <td><p>An aaa-igraph-package object that represents a directed acyclic graph with certain attributes. See Details.</p></td>
    </tr>
    <tr>
      <th>constraints</th>
      <td><p>A vector of character strings that represent the constraints on counterfactual quantities</p></td>
    </tr>
    <tr>
      <th>effectt</th>
      <td><p>A character string that represents the causal effect of interest</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A an object of class "linearcausalproblem", which is a list with the
  following components. This list can be passed to <a href='optimize_effect.html'>optimize_effect</a>
  which interfaces with Balke's code. Print and plot methods are also
  available.</p><dl>
  <dt>variables</dt><dd><p>Character vector of variable names
  of potential outcomes, these start with 'q' to match Balke's notation</p></dd>
  <dt>parameters</dt><dd><p>Character vector of parameter names of observed
  probabilities, these start with 'p' to match Balke's notation</p></dd>
  <dt>constraints</dt><dd><p>Character vector of parsed constraints</p></dd>
  <dt>objective</dt><dd><p>Character string defining the objective to be optimized in
  terms of the variables</p></dd> 
  <dt>p.vals</dt><dd><p>Matrix of all possible values of the
  observed data vector, corresponding to the list of parameters.</p></dd>
  <dt>q.vals</dt><dd><p>Matrix of all possible values of the response function form
  of the potential outcomes, corresponding to the list of variables.</p></dd>
  <dt>parsed.query</dt><dd><p>A nested list containing information on the parsed
  causal query.</p></dd> 
  <dt>objective.nonreduced</dt><dd><p>The objective in terms of the
  original variables, before algebraic variable reduction. The nonreduced
  variables can be obtained by concatenating the columns of q.vals.</p></dd>
  <dt>response.functions</dt><dd><p>List of response functions.</p></dd> 
  <dt>graph</dt><dd><p>The graph as passed to the function.</p></dd> 
  <dt>R</dt><dd><p>A matrix with coefficients
  relating the p.vals to the q.vals p = R * q</p></dd> 
  <dt>c0</dt><dd><p>A vector of coefficients relating the q.vals to the 
  objective function theta = c0 * q</p></dd> 
  <dt>iqR</dt><dd><p>A matrix with coefficients to represent the inequality
  constraints</p></dd> 
</dl>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The graph object must contain the following named vertex attributes:</p><dl>
<dt>name</dt><dd><p>The name of each vertex must be a valid R object name starting with a letter and no special characters. Good candidate names are for example, Z1, Z2, W2, X3, etc.</p></dd>
<dt>leftside</dt><dd><p>An indicator of whether the vertex is on the left side of the graph, 1 if yes, 0 if no.</p></dd>
<dt>latent</dt><dd><p>An indicator of whether the variable is latent (unobserved). There should always be a variable Ul on the left side that is latent and a parent of all variables on the left side, and another latent variable Ur on the right side that is a parent of all variables on the right side.</p></dd>
<dt>nvals</dt><dd><p>The number of possible values that the variable can take on, the default and minimum is 2 for 2 categories (0,1).</p></dd>

</dl><p>In addition, there must be the following edge attributes:</p><dl>
<dt>rlconnect</dt><dd><p>An indicator of whether the edge goes from the right side to the left side. Should be 0 for all edges.</p></dd>
<dt>edge.monotone</dt><dd><p>An indicator of whether the effect of the edge is monotone, meaning that if V1 -&gt; V2 and the edge is monotone, then a &gt; b implies V2(V1 = a) &gt;= V2(V1 = b). Only available for binary variables (nvals = 2).</p></dd>

</dl><p>The effectt parameter describes your causal effect of interest. The effectt parameter must be of the form</p>
<p><code>p{V11(X=a)=a; V12(X=a)=b;...} op1 p{V21(X=b)=a; V22(X=c)=b;...} op2 ...</code></p>
<p>where Vij are names of variables in the graph, a, b are numeric values from 0:(nvals - 1), and op are either - or +. You can specify a single probability statement (i.e., no operator). Note that the probability statements begin with little p, and use curly braces, and items inside the probability statements are separated by ;. The variables may be potential outcomes which are denoted by parentheses. Variables may also be nested inside potential outcomes. Pure observations such as <code>p{Y = 1}</code> are not allowed if the left side contains any variables. If the left side contains any variables, then they mush be ancestors of the intervention set variables (or the intervention variables themselves). All of the following are valid effect statements:</p>
<p><code>p{Y(X = 1) = 1} - p{Y(X = 0) = 1}</code></p>
<p><code>p{X(Z = 1) = 1; X(Z = 0) = 0}</code></p>
<p><code>p{Y(M(X = 0), X = 1) = 1} - p{Y(M(X = 0), X = 0) = 1}</code></p>
<p>The constraints are specified in terms of potential outcomes to constrain by writing the potential outcomes, values of their parents, and operators that determine the constraint (equalities or inequalities). For example,
<code>X(Z = 1) &gt;= X(Z = 0)</code></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>### confounded exposure and outcome</span>
<span class='va'>b</span> <span class='op'>&lt;-</span> <span class='fu'>igraph</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/igraph/man/graph_from_literal.html'>graph_from_literal</a></span><span class='op'>(</span><span class='va'>X</span> <span class='op'>-</span><span class='op'>+</span> <span class='va'>Y</span>, <span class='va'>Ur</span> <span class='op'>-</span><span class='op'>+</span> <span class='va'>X</span>, <span class='va'>Ur</span> <span class='op'>-</span><span class='op'>+</span> <span class='va'>Y</span><span class='op'>)</span>
<span class='fu'>V</span><span class='op'>(</span><span class='va'>b</span><span class='op'>)</span><span class='op'>$</span><span class='va'>leftside</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>0</span><span class='op'>)</span>
<span class='fu'>V</span><span class='op'>(</span><span class='va'>b</span><span class='op'>)</span><span class='op'>$</span><span class='va'>latent</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>0</span>,<span class='fl'>1</span><span class='op'>)</span>
<span class='fu'>V</span><span class='op'>(</span><span class='va'>b</span><span class='op'>)</span><span class='op'>$</span><span class='va'>nvals</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>2</span>,<span class='fl'>2</span>,<span class='fl'>2</span><span class='op'>)</span>
<span class='fu'>E</span><span class='op'>(</span><span class='va'>b</span><span class='op'>)</span><span class='op'>$</span><span class='va'>rlconnect</span> <span class='op'>&lt;-</span> <span class='fu'>E</span><span class='op'>(</span><span class='va'>b</span><span class='op'>)</span><span class='op'>$</span><span class='va'>edge.monotone</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>0</span><span class='op'>)</span>
<span class='fu'>analyze_graph</span><span class='op'>(</span><span class='va'>b</span>, constraints <span class='op'>=</span> <span class='cn'>NULL</span>, effectt <span class='op'>=</span> <span class='st'>"p{Y(X = 1) = 1} - p{Y(X = 0) = 1}"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Ready to compute bounds for the effect p{Y(X = 1) = 1} - p{Y(X = 0) = 1} 
#&gt;  Under the assumption encoded in the graph: + 3/3 edges from 44a6d17 (vertex names):
#&gt; [1] X -&gt;Y Ur-&gt;X Ur-&gt;Y
#&gt; Number of possible values of each variable: 
#&gt;  X: 2, Y: 2 
#&gt; No constraints have been specified 
#&gt;  The bounds will be reported in terms of parameters of the form pab_, which represents the probability P(X = a, Y = b). 
#&gt; Additional information is available in the following list elements: [1] "variables"            "parameters"           "constraints"         
#&gt;  [4] "objective"            "p.vals"               "q.vals"              
#&gt;  [7] "parsed.query"         "unparsed.query"       "user.constraints"    
#&gt; [10] "objective.nonreduced" "response.functions"   "graph"               
#&gt; [13] "R"                    "c0"                  </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Michael C Sachs, Erin E Gabriel, Arvid Sjölander.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


